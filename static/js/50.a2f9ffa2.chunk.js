(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[50],{1258:function(e,s,c){},1259:function(e,s,c){},1622:function(e,s,c){"use strict";c.r(s);var t=c(33),a=c(1),n=c(12),l=c(15),i=c.n(l),r=(c(1258),c(479)),j=c(143),d=c(130),o=c(2),b=c.n(o),h=c(501),m=c.n(h),u=c(810),O=c(894),x=c(903),f=c(941),N=c(815),g=c(899),p=c(895),v=c(879),y=c(913),k=c(93),w=c(9),C=function(e){var s=e.handleUser,c=e.handleUserSidebarRight,l=e.handleSidebar,o=e.store,h=e.userSidebarLeft,C=o.userProfile,S=o.selectedUser,z=Object(a.useRef)(null),M=Object(d.b)(),D=Object(a.useState)(""),T=Object(t.a)(D,2),I=T[0],L=T[1],E=Object(a.useState)(!1),F=Object(t.a)(E,2),U=F[0],R=F[1],P=Object(a.useState)({x:0,y:0}),A=Object(t.a)(P,2),K=A[0],H=A[1],W=Object(a.useState)(null),B=Object(t.a)(W,2),V=B[0],G=B[1],J=Object(a.useState)(null),X=Object(t.a)(J,2),_=X[0],Y=X[1],q=Object(a.useState)(""),Q=Object(t.a)(q,2),Z=Q[0],$=Q[1],ee=Object(a.createRef)();Object(a.useEffect)((function(){Object.keys(S).length&&(i.a.findDOMNode(z.current).scrollTop=Number.MAX_SAFE_INTEGER)}),[S]);var se=function(){var e=[];S.chat&&(e=S.chat.chat);var s=[],c=e[0]?e[0].senderId:void 0,t={senderId:c,messages:[]};return e.forEach((function(a,n){c===a.senderId?t.messages.push({msg:a.message,time:a.time,repliedTo:void 0!==a.repliedTo?a.repliedTo:null,starred:void 0!==a.starred?a.starred:null}):(c=a.senderId,s.push(t),t={senderId:a.senderId,messages:[{msg:a.message,time:a.time,repliedTo:void 0!==a.repliedTo?a.repliedTo:null,starred:void 0!==a.starred?a.starred:null}]}),n===e.length-1&&s.push(t)})),s},ce=function(e,s,c){e.preventDefault(),R(!0),H({x:e.pageX,y:e.pageY}),G(c),Y(s)},te=function(e){e.preventDefault(),ee.current.focus(),$("reply"),R(!1)},ae=function(e){e.preventDefault(),M(Object(j.h)(Object(n.a)(Object(n.a)({},S),{},{message:V}))),G(null),R(!1)},ne=function(e){e.preventDefault(),ee.current.focus(),$("edit"),L(V),R(!1)},le=function(e){e.preventDefault(),M(Object(j.b)(Object(n.a)(Object(n.a)({},S),{},{message:V,senderId:_}))),G(null),R(!1)},ie=Object.keys(S).length&&S.chat?m.a:"div";return Object(w.jsxs)("div",{className:"chat-app-window",children:[Object(w.jsxs)("div",{className:b()("start-chat-area",{"d-none":Object.keys(S).length}),children:[Object(w.jsx)("div",{className:"start-chat-icon mb-1",children:Object(w.jsx)(u.a,{})}),Object(w.jsx)("h4",{className:"sidebar-toggle start-chat-text",onClick:function(){!Object.keys(S).length&&!h&&window.innerWidth<992&&l()},children:"Start Conversation"})]}),Object.keys(S).length?Object(w.jsxs)("div",{className:b()("active-chat",{"d-none":null===S}),children:[Object(w.jsxs)("div",{className:"chat-navbar",children:[Object(w.jsxs)("header",{className:"chat-header",children:[Object(w.jsxs)("div",{className:"d-flex align-items-center",children:[Object(w.jsx)("div",{className:"sidebar-toggle d-block d-lg-none me-1",onClick:l,children:Object(w.jsx)(O.a,{size:21})}),Object(w.jsx)(r.a,{imgHeight:"36",imgWidth:"36",img:S.contact.avatar,status:S.contact.status,className:"avatar-border user-profile-toggle m-0 me-1",onClick:function(){return e=S.contact,c(),void s(e);var e}}),Object(w.jsx)("h6",{className:"mb-0",children:S.contact.fullName})]}),Object(w.jsxs)("div",{className:"d-flex align-items-center",children:[Object(w.jsx)(x.a,{size:18,className:"cursor-pointer d-sm-block d-none me-1"}),Object(w.jsx)(f.a,{size:18,className:"cursor-pointer d-sm-block d-none me-1"}),Object(w.jsx)(N.a,{size:18,className:"cursor-pointer d-sm-block d-none"}),Object(w.jsxs)(k.wb,{className:"more-options-dropdown",children:[Object(w.jsx)(k.G,{className:"btn-icon",color:"transparent",size:"sm",children:Object(w.jsx)(g.a,{size:"18"})}),Object(w.jsxs)(k.F,{end:!0,children:[Object(w.jsx)(k.E,{href:"/",onClick:function(e){return e.preventDefault()},children:"View Contact"}),Object(w.jsx)(k.E,{href:"/",onClick:function(e){return e.preventDefault()},children:"Mute Notifications"}),Object(w.jsx)(k.E,{href:"/",onClick:function(e){return e.preventDefault()},children:"Block Contact"}),Object(w.jsx)(k.E,{href:"/",onClick:function(e){return e.preventDefault()},children:"Clear Chat"}),Object(w.jsx)(k.E,{href:"/",onClick:function(e){return e.preventDefault()},children:"Report"})]})]})]})]}),Object(w.jsx)("div",{className:"chat-pinned",children:Object(w.jsx)(w.Fragment,{children:function(){var e=se();return Object(w.jsx)(w.Fragment,{children:e.map((function(e){return Object(w.jsx)(w.Fragment,{children:e.messages.map((function(e){return Object(w.jsx)(w.Fragment,{children:null!==e.starred&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{style:{borderLeft:"6px solid blue",height:"45px"}}),Object(w.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"100%"},children:[Object(w.jsx)("div",{style:{color:"blue"},children:"Pinned Message"}),Object(w.jsx)("div",{children:e.msg})]})]})})}))})}))})}()})})]}),Object(w.jsx)(ie,{ref:z,className:"user-chats",options:{wheelPropagation:!1},children:S.chat?Object(w.jsx)("div",{className:"chats",children:function(){var e=se();return Object(w.jsxs)(w.Fragment,{children:[e.map((function(e,s){return Object(w.jsxs)("div",{className:b()("chat",{"chat-left":11!==e.senderId}),onClick:function(){R(!1),L("")},children:[Object(w.jsx)("div",{className:"chat-avatar",children:Object(w.jsx)(r.a,{imgWidth:36,imgHeight:36,className:"box-shadow-1 cursor-pointer",img:11===e.senderId?C.avatar:S.contact.avatar})}),Object(w.jsx)("div",{className:"chat-body",children:e.messages.map((function(s){return Object(w.jsx)("div",{className:"chat-content",children:null!==s.repliedTo?Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{style:{opacity:"0.5",backgroundColor:"white",color:"black"},children:s.repliedTo}),Object(w.jsx)("p",{onContextMenu:function(c){return ce(c,e.senderId,s.msg)},children:s.msg})]}):Object(w.jsx)("p",{onContextMenu:function(c){return ce(c,e.senderId,s.msg)},children:s.msg})},s.msg)}))})]},s)})),U&&Object(w.jsxs)("div",{style:{top:K.y,left:K.x},className:"contextMenu",children:[Object(w.jsx)("div",{className:"contextMenu--option",onClick:te,children:"Reply"}),Object(w.jsx)("div",{className:"contextMenu--option",onClick:ae,children:"Pin"}),11===_&&Object(w.jsx)("div",{className:"contextMenu--option",onClick:ne,children:"Edit"}),Object(w.jsx)("div",{className:"contextMenu--option",onClick:le,children:"Delete"})]})]})}()}):null}),null!==V&&Object(w.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"20% 78% 2%",border:"1px solid black",marginTop:"2%"},children:[Object(w.jsx)("div",{style:{borderLeft:"6px solid green",height:"45px"}}),Object(w.jsx)("div",{style:{marginLeft:"-20%"},children:V}),Object(w.jsx)("div",{style:{cursor:"pointer"},children:Object(w.jsx)("img",{src:"https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-close-512.png",width:"10px",onClick:function(){G(null),L("")}})})]}),Object(w.jsxs)(k.H,{className:"chat-app-form",onSubmit:function(e){return function(e){e.preventDefault(),I.length&&"edit"===Z?M(Object(j.c)(Object(n.a)(Object(n.a)({},S),{},{message:V,editedMsg:I}))):I.length&&(M(Object(j.g)(Object(n.a)(Object(n.a)({},S),{},{message:I,repliedTo:V}))),L(""),G(null)),$("")}(e)},children:[Object(w.jsxs)(k.L,{className:"input-group-merge me-1 form-send-message",children:[Object(w.jsx)(k.M,{children:Object(w.jsx)(p.a,{className:"cursor-pointer",size:14})}),Object(w.jsx)(k.K,{innerRef:ee,value:I,onChange:function(e){return L(e.target.value)},placeholder:"Type your message or use speech to text"}),Object(w.jsx)(k.M,{children:Object(w.jsxs)(k.N,{className:"attachment-icon mb-0",for:"attach-doc",children:[Object(w.jsx)(v.a,{className:"cursor-pointer text-secondary",size:14}),Object(w.jsx)("input",{type:"file",id:"attach-doc",hidden:!0})]})})]}),Object(w.jsxs)(k.i,{className:"send",color:"primary",children:[Object(w.jsx)(y.a,{size:14,className:"d-lg-none"}),Object(w.jsx)("span",{className:"d-none d-lg-block",children:"Send"})]})]})]}):null]})},S=c(128),z=c(481),M=c(797),D=c(809),T=c(829),I=c(807),L=c(930),E=function(e){var s=e.store,c=e.sidebar,n=e.handleSidebar,l=e.userSidebarLeft,i=e.handleUserSidebarLeft,o=s.chats,h=s.contacts,u=s.userProfile,O=Object(d.b)(),x=Object(a.useState)(""),f=Object(t.a)(x,2),g=f[0],p=f[1],v=Object(a.useState)(""),y=Object(t.a)(v,2),C=y[0],E=y[1],F=Object(a.useState)(0),U=Object(t.a)(F,2),R=U[0],P=U[1],A=Object(a.useState)("online"),K=Object(t.a)(A,2),H=K[0],W=K[1],B=Object(a.useState)([]),V=Object(t.a)(B,2),G=V[0],J=V[1],X=Object(a.useState)([]),_=Object(t.a)(X,2),Y=_[0],q=_[1],Q=function(e){O(Object(j.f)(e)),P(e),!0===c&&n()};Object(a.useEffect)((function(){Object(z.e)(s.selectedUser)||(s.selectedUser.chat?P(s.selectedUser.chat.id):P(s.selectedUser.contact.id))}),[]);return s?Object(w.jsx)("div",{className:"sidebar-left",children:Object(w.jsxs)("div",{className:"sidebar",children:[Object(w.jsxs)("div",{className:b()("chat-profile-sidebar",{show:l}),children:[Object(w.jsxs)("header",{className:"chat-profile-header",children:[Object(w.jsx)("div",{className:"close-icon",onClick:i,children:Object(w.jsx)(M.a,{size:14})}),Object(w.jsxs)("div",{className:"header-profile-sidebar",children:[Object(w.jsx)(r.a,{className:"box-shadow-1 avatar-border",img:u.avatar,status:H,size:"xl"}),Object(w.jsx)("h4",{className:"chat-user-name",children:u.fullName}),Object(w.jsx)("span",{className:"user-post",children:u.role})]})]}),Object(w.jsxs)(m.a,{className:"profile-sidebar-area",options:{wheelPropagation:!1},children:[Object(w.jsx)("h6",{className:"section-label mb-1",children:"About"}),Object(w.jsxs)("div",{className:"about-user",children:[Object(w.jsx)(k.K,{rows:"5",type:"textarea",defaultValue:u.about,onChange:function(e){return E(e.target.value)},className:b()("char-textarea",{"text-danger":C&&C.length>120})}),Object(w.jsxs)("small",{className:"counter-value float-end",children:[Object(w.jsx)("span",{className:"char-count",children:u&&u.about&&u.about.length&&0===C.length?u.about.length:C.length})," / 120"]})]}),Object(w.jsx)("h6",{className:"section-label mb-1 mt-3",children:"Status"}),Object(w.jsxs)("ul",{className:"list-unstyled user-status",children:[Object(w.jsx)("li",{className:"pb-1",children:Object(w.jsxs)("div",{className:"form-check form-check-success",children:[Object(w.jsx)(k.K,{type:"radio",label:"Online",id:"user-online",checked:"online"===H,onChange:function(){return W("online")}}),Object(w.jsx)(k.N,{className:"form-check-label",for:"user-online",children:"Online"})]})}),Object(w.jsx)("li",{className:"pb-1",children:Object(w.jsxs)("div",{className:"form-check form-check-danger",children:[Object(w.jsx)(k.K,{type:"radio",id:"user-busy",label:"Do Not Disturb",checked:"busy"===H,onChange:function(){return W("busy")}}),Object(w.jsx)(k.N,{className:"form-check-label",for:"user-busy",children:"Busy"})]})}),Object(w.jsx)("li",{className:"pb-1",children:Object(w.jsxs)("div",{className:"form-check form-check-warning",children:[Object(w.jsx)(k.K,{type:"radio",label:"Away",id:"user-away",checked:"away"===H,onChange:function(){return W("away")}}),Object(w.jsx)(k.N,{className:"form-check-label",for:"user-away",children:"Away"})]})}),Object(w.jsx)("li",{className:"pb-1",children:Object(w.jsxs)("div",{className:"form-check form-check-secondary",children:[Object(w.jsx)(k.K,{type:"radio",label:"Offline",id:"user-offline",checked:"offline"===H,onChange:function(){return W("offline")}}),Object(w.jsx)(k.N,{className:"form-check-label",for:"user-offline",children:"Offline"})]})})]}),Object(w.jsx)("h6",{className:"section-label mb-1 mt-2",children:"Settings"}),Object(w.jsxs)("ul",{className:"list-unstyled",children:[Object(w.jsxs)("li",{className:"d-flex justify-content-between align-items-center mb-1",children:[Object(w.jsxs)("div",{className:"d-flex align-items-center",children:[Object(w.jsx)(D.a,{className:"me-75",size:"18"}),Object(w.jsx)("span",{className:"align-middle",children:"Two-step Verification"})]}),Object(w.jsx)("div",{className:"form-switch",children:Object(w.jsx)(k.K,{type:"switch",id:"verification",name:"verification",defaultChecked:!0})})]}),Object(w.jsxs)("li",{className:"d-flex justify-content-between align-items-center mb-1",children:[Object(w.jsxs)("div",{className:"d-flex align-items-center",children:[Object(w.jsx)(T.a,{className:"me-75",size:"18"}),Object(w.jsx)("span",{className:"align-middle",children:"Notification"})]}),Object(w.jsx)("div",{className:"form-switch",children:Object(w.jsx)(k.K,{type:"switch",id:"notifications",name:"notifications"})})]}),Object(w.jsxs)("li",{className:"d-flex align-items-center cursor-pointer mb-1",children:[Object(w.jsx)(I.a,{className:"me-75",size:"18"}),Object(w.jsx)("span",{className:"align-middle",children:"Invite Friends"})]}),Object(w.jsxs)("li",{className:"d-flex align-items-center cursor-pointer",children:[Object(w.jsx)(L.a,{className:"me-75",size:"18"}),Object(w.jsx)("span",{className:"align-middle",children:"Delete Account"})]})]}),Object(w.jsx)("div",{className:"mt-3",children:Object(w.jsx)(k.i,{color:"primary",children:"Logout"})})]})]}),Object(w.jsxs)("div",{className:b()("sidebar-content",{show:!0===c}),children:[Object(w.jsx)("div",{className:"sidebar-close-icon",onClick:n,children:Object(w.jsx)(M.a,{size:14})}),Object(w.jsx)("div",{className:"chat-fixed-search",children:Object(w.jsxs)("div",{className:"d-flex align-items-center w-100",children:[Object(w.jsx)("div",{className:"sidebar-profile-toggle",onClick:i,children:Object.keys(u).length?Object(w.jsx)(r.a,{className:"avatar-border",img:u.avatar,status:H,imgHeight:"42",imgWidth:"42"}):null}),Object(w.jsxs)(k.L,{className:"input-group-merge ms-1 w-100",children:[Object(w.jsx)(k.M,{className:"round",children:Object(w.jsx)(N.a,{className:"text-muted",size:14})}),Object(w.jsx)(k.K,{value:g,className:"round",placeholder:"Search or start a new chat",onChange:function(e){p(e.target.value);var s=function(s){return s.fullName.toLowerCase().includes(e.target.value.toLowerCase())},c=o.filter(s),t=h.filter(s);J(Object(S.a)(c)),q(Object(S.a)(t))}})]})]})}),Object(w.jsxs)(m.a,{className:"chat-user-list-wrapper list-group",options:{wheelPropagation:!1},children:[Object(w.jsx)("h4",{className:"chat-list-title",children:"Chats"}),Object(w.jsx)("ul",{className:"chat-users-list chat-list media-list",children:o&&o.length?g.length&&!G.length?Object(w.jsx)("li",{className:"no-results show",children:Object(w.jsx)("h6",{className:"mb-0",children:"No Chats Found"})}):(g.length&&G.length?G:o).map((function(e){var s=Object(z.b)(e.chat.lastMessage?e.chat.lastMessage.time:new Date);return Object(w.jsxs)("li",{onClick:function(){return Q(e.id)},className:b()({active:R===e.id}),children:[Object(w.jsx)(r.a,{img:e.avatar,imgHeight:"42",imgWidth:"42",status:e.status}),Object(w.jsxs)("div",{className:"chat-info flex-grow-1",children:[Object(w.jsx)("h5",{className:"mb-0",children:e.fullName}),Object(w.jsx)(k.u,{className:"text-truncate",children:e.chat.lastMessage?e.chat.lastMessage.message:o[o.length-1].message})]}),Object(w.jsxs)("div",{className:"chat-meta text-nowrap",children:[Object(w.jsx)("small",{className:"float-end mb-25 chat-time ms-25",children:s}),e.chat.unseenMsgs>=1?Object(w.jsx)(k.f,{className:"float-end",color:"danger",pill:!0,children:e.chat.unseenMsgs}):null]})]},e.id)})):null}),Object(w.jsx)("h4",{className:"chat-list-title",children:"Contacts"}),Object(w.jsx)("ul",{className:"chat-users-list contact-list media-list",children:h&&h.length?g.length&&!Y.length?Object(w.jsx)("li",{className:"no-results show",children:Object(w.jsx)("h6",{className:"mb-0",children:"No Chats Found"})}):(g.length&&Y.length?Y:h).map((function(e){return Object(w.jsxs)("li",{onClick:function(){return Q(e.id)},children:[Object(w.jsx)(r.a,{img:e.avatar,imgHeight:"42",imgWidth:"42"}),Object(w.jsxs)("div",{className:"chat-info flex-grow-1",children:[Object(w.jsx)("h5",{className:"mb-0",children:e.fullName}),Object(w.jsx)(k.u,{className:"text-truncate",children:e.about})]})]},e.fullName)})):null})]})]})]})}):null},F=c(808),U=c(844),R=c(926),P=c(923),A=c(920),K=function(e){var s=e.user,c=e.handleUserSidebarRight,t=e.userSidebarRight;return Object(w.jsxs)("div",{className:b()("user-profile-sidebar",{show:!0===t}),children:[Object(w.jsxs)("header",{className:"user-profile-header",children:[Object(w.jsx)("span",{className:"close-icon",onClick:c,children:Object(w.jsx)(M.a,{size:14})}),Object(w.jsxs)("div",{className:"header-profile-sidebar",children:[Object(w.jsx)(r.a,{className:"box-shadow-1 avatar-border",size:"xl",status:s.status,img:s.avatar,imgHeight:"70",imgWidth:"70"}),Object(w.jsx)("h4",{className:"chat-user-name",children:s.fullName}),Object(w.jsx)("span",{className:"user-post",children:s.role})]})]}),Object(w.jsxs)(m.a,{className:"user-profile-sidebar-area",options:{wheelPropagation:!1},children:[Object(w.jsx)("h6",{className:"section-label mb-1",children:"About"}),Object(w.jsx)("p",{children:s.about}),Object(w.jsxs)("div",{className:"personal-info",children:[Object(w.jsx)("h6",{className:"section-label mb-1 mt-3",children:"Personal Information"}),Object(w.jsxs)("ul",{className:"list-unstyled",children:[Object(w.jsxs)("li",{className:"mb-1",children:[Object(w.jsx)(F.a,{className:"me-75",size:17}),Object(w.jsx)("span",{className:"align-middle",children:"lucifer@email.com"})]}),Object(w.jsxs)("li",{className:"mb-1",children:[Object(w.jsx)(x.a,{className:"me-50",size:17}),Object(w.jsx)("span",{className:"align-middle",children:" +1(123) 456 - 7890"})]}),Object(w.jsxs)("li",{children:[Object(w.jsx)(U.a,{className:"me-50",size:17}),Object(w.jsx)("span",{className:"align-middle",children:" Mon - Fri 10AM - 8PM"})]})]})]}),Object(w.jsxs)("div",{className:"more-options",children:[Object(w.jsx)("h6",{className:"section-label mb-1 mt-3",children:"Options"}),Object(w.jsxs)("ul",{className:"list-unstyled",children:[Object(w.jsxs)("li",{className:"cursor-pointer mb-1",children:[Object(w.jsx)(R.a,{className:"me-50",size:17}),Object(w.jsx)("span",{className:"align-middle",children:" Add Tag"})]}),Object(w.jsxs)("li",{className:"cursor-pointer mb-1",children:[Object(w.jsx)(P.a,{className:"me-50",size:17}),Object(w.jsx)("span",{className:"align-middle",children:" Important Contact"})]}),Object(w.jsxs)("li",{className:"cursor-pointer mb-1",children:[Object(w.jsx)(v.a,{className:"me-50",size:17}),Object(w.jsx)("span",{className:"align-middle",children:" Shared Media"})]}),Object(w.jsxs)("li",{className:"cursor-pointer mb-1",children:[Object(w.jsx)(L.a,{className:"me-50",size:17}),Object(w.jsx)("span",{className:"align-middle",children:" Delete Contact"})]}),Object(w.jsxs)("li",{className:"cursor-pointer",children:[Object(w.jsx)(A.a,{className:"me-75",size:17}),Object(w.jsx)("span",{className:"align-middle",children:"Block Contact"})]})]})]})]})]})};c(1259),c(705),s.default=function(){var e=Object(d.b)(),s=Object(d.c)((function(e){return e.chat})),c=Object(a.useState)({}),n=Object(t.a)(c,2),l=n[0],i=n[1],r=Object(a.useState)(!1),o=Object(t.a)(r,2),h=o[0],m=o[1],u=Object(a.useState)(!1),O=Object(t.a)(u,2),x=O[0],f=O[1],N=Object(a.useState)(!1),g=Object(t.a)(N,2),p=g[0],v=g[1],y=function(){return m(!h)},k=function(){return f(!x)};return Object(a.useEffect)((function(){e(Object(j.d)()),e(Object(j.e)())}),[e]),Object(w.jsxs)(a.Fragment,{children:[Object(w.jsx)(E,{store:s,sidebar:h,handleSidebar:y,userSidebarLeft:p,handleUserSidebarLeft:function(){return v(!p)}}),Object(w.jsx)("div",{className:"content-right",children:Object(w.jsx)("div",{className:"content-wrapper",children:Object(w.jsxs)("div",{className:"content-body",children:[Object(w.jsx)("div",{className:b()("body-content-overlay",{show:!0===x||!0===h||!0===p}),onClick:function(){m(!1),f(!1),v(!1)}}),Object(w.jsx)(C,{store:s,handleUser:function(e){return i(e)},handleSidebar:y,userSidebarLeft:p,handleUserSidebarRight:k}),Object(w.jsx)(K,{user:l,userSidebarRight:x,handleUserSidebarRight:k})]})})})]})}},705:function(e,s,c){}}]);
//# sourceMappingURL=50.a2f9ffa2.chunk.js.map